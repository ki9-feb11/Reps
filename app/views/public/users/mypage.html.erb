<h2><%= current_user.last_name %> さんのマイページ</h2>

<div class="row">
  <!-- 左側：プロフィール情報 -->
  <div class="col-md-4">
    <div class="card">
      <div class="card-header">
        <h5 class="mb-0">プロフィール</h5>
      </div>
      <div class="card-body">

        <!-- ユーザー情報 -->
        <div class="profile-info">
          <div class="mb-3">
            <label class="form-label fw-bold">姓</label>
            <p class="form-control-plaintext"><%= current_user.last_name || "未設定" %></p>
          </div>
        
          <div class="mb-3">
            <label class="form-label fw-bold">名</label>
            <p class="form-control-plaintext"><%= current_user.first_name || "未設定" %></p>
          </div>
        
          <div class="mb-3">
            <label class="form-label fw-bold">メールアドレス</label>
            <p class="form-control-plaintext"><%= current_user.email %></p>
          </div>

          <div class="mb-3">
            <label class="form-label fw-bold">役職</label>
            <p class="form-control-plaintext"><%= current_user.position %></p>
          </div>

          <div class="mb-3">
            <label class="form-label fw-bold">担当地域</label>
            <p class="form-control-plaintext"><%= current_user.region %></p>
          </div>
        </div>

        <!-- 編集ボタン -->
        <div class="d-grid">
          <%= link_to "プロフィールを編集", edit_user_path(current_user), class: "btn btn-primary" %>
        </div>
      </div>
    </div>
  </div>

  <!-- 右側：投稿・ブックマークタブ -->
  <div class="col-md-8">
    <ul class="nav nav-tabs mb-3" id="mypageTabs" role="tablist">
      <li class="nav-item" role="presentation">
        <button class="nav-link active" id="posts-tab" data-bs-toggle="tab" data-bs-target="#posts" type="button" role="tab">自分の投稿</button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link" id="bookmarks-tab" data-bs-toggle="tab" data-bs-target="#bookmarks" type="button" role="tab">ブックマーク</button>
      </li>
    </ul>
    
    <div class="tab-content">
      <div class="tab-pane fade show active" id="posts" role="tabpanel">
        <% if @posts.any? %>
          <ul class="list-group">
            <% @posts.each do |post| %>
              <li class="list-group-item">
                <%= link_to post.title, post_path(post) %>
                （<%= l(post.created_at, format: :short) %>）
              </li>
            <% end %>
          </ul>
        <% else %>
          <p>投稿がありません。</p>
        <% end %>
      </div>
      
      <% if false %>
        <div class="tab-pane fade" id="bookmarks" role="tabpanel">
          <% if @bookmarked_posts.any? %>
            <ul class="list-group">
              <% @bookmarked_posts.each do |post| %>
                <li class="list-group-item">
                  <%= link_to post.title, post_path(post) %>
                  （<%= l(post.created_at, format: :short) %>）
                </li>
              <% end %>
            </ul>
          <% else %>
            <p>ブックマークされた投稿はありません。</p>
          <% end %>
        </div>
      <% end %>
    </div>
  </div>
</div>